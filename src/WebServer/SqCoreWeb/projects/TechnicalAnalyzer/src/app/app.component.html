<div class="mainDiv1">
  <h4>Technical Analyzer</h4>
  <div>Tickers:<input type="text" [value]="m_tickersStr" (change)="onInputTickers($event)"></div><br>
  <table *ngIf="m_assetHistDatas.length > 0">  <!-- Verify if m_assetHistDatas contains data; otherwise, (the second) *ngFor indexes into the [0] item forDates, and that will fail. -->
    <thead>
      <tr>
        <th>Date</th>
        <th *ngFor="let asset of m_assetHistDatas">{{ asset.symbol }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dateIndex of m_assetHistDatas[0].pctChnDatas; let i = index"> <!-- To iterate through dates using the first asset's pctChnDatas array -->
        <td>{{ m_assetHistDatas[0].pctChnDatas[i].Date | date : 'yyyy-MM-dd' }}</td>  <!-- Display the date in the first column -->
        <td *ngFor="let asset of m_assetHistDatas">
          <div class="pctChnTooltip">
            <span class="pctChnTooltipText">
              <ng-container *ngFor="let item of [{period: 60, signal: 1}, {period: 120, signal: 2}, {period: 180, signal: 3}, {period: 252, signal: 4}]"> <!-- Iterate over different lookback periods and corresponding pctChnSignals using period and signal objects -->
                PctChn-{{ item.period }}: <span [ngStyle]="{'color': (m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'ValidBull' || m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'NonValidBull') ? 'Green' : 'Red'}">
                  {{ 
                    m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'ValidBull' ? 'Bull' : 
                    m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'NonValidBull' ? '?Bull' : 
                    m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'ValidBear' ? 'Bear' : 
                    m_enumPctChnSignal[asset.pctChnDatas[i]['pctChnSignal' + item.signal]] === 'NonValidBear' ? '?Bear' : 
                    'Unknown'
                  }}
                </span><br>
              </ng-container>
            </span>{{ asset.pctChnDatas[i].pctChnWeightAggregate | percent:'1.2' }}
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>