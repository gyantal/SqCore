<div class="mainDiv1">
  <h4>Portfolio Viewer</h4>
  PortfolioId: {{m_portfolioId}}
  <div>PortfolioName: {{m_portfolio?.name}}</div>
  <button [ngClass]="{'activeTabItem':m_activeTab == 'Positions'}" (click)="onActiveTabCicked('Positions')">Positions</button>&nbsp;<button [ngClass]="{'activeTabItem':m_activeTab == 'Portfolio Report'}" (click)="onActiveTabCicked('Portfolio Report')">Portfolio Report</button>&nbsp;<button [ngClass]="{'activeTabItem':m_activeTab == 'Trades'}" (click)="onActiveTabCicked('Trades')">Trades*</button>&nbsp;<button [ngClass]="{'activeTabItem':m_activeTab == 'Portfolio Performance Accumulator'}" (click)="onActiveTabCicked('Portfolio Performance Accumulator')">Portfolio Performance Accumulator</button>
  <div [hidden]="m_activeTab != 'Positions'">&nbsp;
    <header>Historical Positions EndDate: <input type="Date" [(ngModel)]="m_histPosEndDate" (change)="onHistPeriodChangeClicked()"></header>&nbsp;
    <table class="tableCommon">
      <thead>
        <tr>
          <th>SqTicker</th>
          <th>Quantity</th>
          <th>AvgPrice</th>
          <th>Price</th>
          <th>HoldingCost</th>
          <th>HoldingValue</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of m_uiPrtfRunResult.prtfPosValues">
          <td>{{item.sqTicker}}</td>
          <td>{{item.quantity}}</td>
          <td>{{item.avgPrice | number:'1.2-2'}}</td>
          <td>{{item.price | number:'1.2-2'}}</td>
          <td>{{item.holdingCost | number:'1.0-0'}}</td>
          <td>{{item.holdingValue | number:'1.0-0'}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div [hidden]="m_activeTab != 'Portfolio Report'">
    <p>Portfolio Report</p>
    <div>
      <table id="pfStatsTable">
        <tr>
          <td>PV Start Value:{{m_uiPrtfRunResult.startPortfolioValue | currency:'USD':'symbol':'1.0'}}</td>
          <td>PV Final Value:{{m_uiPrtfRunResult.endPortfolioValue | currency:'USD':'symbol':'1.0'}}</td>
          <td>TotalReturn:{{m_uiPrtfRunResult.totalReturn | number:'1.2-2'}}%</td>
        </tr>
        <tr>
          <td><b>CAGR:</b> {{m_uiPrtfRunResult.cAGR | number:'1.2-2'}}%</td>
          <td><b>MaxDD:</b> {{m_uiPrtfRunResult.maxDD | number:'1.2-2'}}%</td>
          <td><b>Sharpe:</b> {{m_uiPrtfRunResult.sharpe | number:'1.2-2'}}</td>
        </tr>
        <tr>
          <td><b>CagrSharpe:</b> {{m_uiPrtfRunResult.cagrSharpe | number:'1.2-2'}}</td>
          <td>StDev: {{m_uiPrtfRunResult.stDev | number:'1.2-2'}}</td>
          <td>Max.TradingDays in DD: {{m_uiPrtfRunResult.tradingDays}}</td>
        </tr>
      </table>
    </div>
    <div id="pfRunResultChrt"></div> <!-- portfolio run result chart  -->
  </div>
  <div [hidden]="m_activeTab != 'Trades'"><br>
    <div id="tradesSection">Trades<br>
      <!-- Add Transaction and clear fields will be enabled once the feature is ready -->
      <button disabled>Insert Trade</button>&nbsp;
      <button disabled>Clear Fields</button><br>
      <input name="assetType" type="radio" [checked]="m_editedTrade.assetType == AssetType.CurrencyCash" [(ngModel)]="m_editedTrade.assetType" value=CurrencyCash>Cash &nbsp;
      <input name="assetType" type="radio" [checked]="m_editedTrade.assetType == AssetType.Stock" [(ngModel)]="m_editedTrade.assetType" value=Stock>Stock &nbsp;
      <input name="assetType" type="radio" [checked]="m_editedTrade.assetType == AssetType.Option" [(ngModel)]="m_editedTrade.assetType" value=Option>Option &nbsp;
      <input name="assetType" type="radio" [checked]="m_editedTrade.assetType == AssetType.Futures" [(ngModel)]="m_editedTrade.assetType" value=Futures>Futures <br>
      Ticker:<input type="text" [(ngModel)]="m_editedTrade.symbol" [value]="m_editedTrade.symbol" oninput="this.value = this.value.toUpperCase()">&nbsp;
      TransactionDate:<input type="date" [ngModel]="m_editedTrade.time | date : 'yyyy-MM-dd'" (ngModelChange)="m_editedTrade.time=$event" [value]="m_editedTrade.time | date : 'yyyy-MM-dd'">
    </div>&nbsp;
    <table class="tableCommon">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Currency</th>
          <th>TradeAction</th>
          <th>AssetType</th>
          <th>Date</th>
          <th>ExchangeId</th>
        </tr>
      </thead>
      <tbody *ngFor="let item of m_trades">
        <tr (click)="onClickSelectedTradeItem(item)" [ngClass]="{'tradedRowSelected': item.isSelected}">
          <td>{{item.underlyingSymbol}}</td>
          <td>{{item.quantity}}</td>
          <td>{{item.price | number:'1.2-2'}}</td>
          <td>{{item.currency}}</td>
          <td>{{item.action}}</td>
          <td>{{item.assetType}}</td>
          <td>{{item.time | date : 'yyyy-MM-dd'}}</td>
          <td>{{item.exchangeId}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div [hidden]="m_activeTab != 'Portfolio Performance Accumulator'">
    <p>Portfolio Performance Accumulator</p>
  </div>
</div>