<div id="panelPrtfMgr">
  <div id="panelPrtfTree">Portfolios
    <span class="tooltipGeneral">
      <div class="tooltipText">
        Force reload Portfolios Tree
      </div>
      <span class="refreshPortfolios"><img class="refreshPortfolios" src='../assets/images/refresh64.webp' (click)="onPortfoliosRefreshClicked()"></span>
    </span>
    <app-sq-tree-view [items]="uiNestedPrtfTreeViewItems" [treeViewState]="treeViewState"></app-sq-tree-view>
    <button (click)="showCreateFolderPopup()">Create Folder</button>&nbsp;
    <button (click)="showCreatePortfolioPopup()">Create Portfolio</button>&nbsp;
    <button (click)="showUpdatePortfolioItemPopup()">Update</button>&nbsp;
    <button (click)="onDeletePrtfItemClicked()">Delete</button>
    <div class="popup infoPopup" [ngStyle]="{'display': isCreateFolderPopupVisible ? 'block' : 'none'}"><br>
      <label><b>Name:</b>&nbsp;</label>
      <input id="folderNameInput" type="text" placeholder="Enter Folder Name" [(ngModel)]="createPrtfItemName"><br><br>
      <span>
        <button (click)="onCreateFolderClicked()">Create New Folder</button>
        <button class="closePopup" (click)="closeCreateFolderPopup()" [ngStyle]="{'display': isCreateFolderPopupVisible ? 'block' : 'none'}">Dismiss</button>
      </span>
    </div><br>
    <div class="popup infoPopup" id="createPortfolioPopup" [ngStyle]="{'display': isCreatePortfolioPopupVisible ? 'block' : 'none'}"><br>
      <div>
        <div>
          <div class="prtfCommon prtfFields">Name:</div>
          <div class="prtfCommon prtfUserValues">
            <input type="text" placeholder="Enter Portfolio Name" [(ngModel)]="createPrtfItemName">
          </div>
        </div>
        <div>
          <div class="prtfCommon prtfFields">Currency:</div>
          <div class="prtfCommon prtfUserValues">
            <select name="currency" [(ngModel)]="currency">
              <option selected>USD</option>
              <option>EUR</option>
              <option>GBP</option>
              <option>GBX</option>
              <option>HUF</option>
              <option>JPY</option>
              <option>CAD</option>
              <option>CNY</option>
              <option>CHF</option>
            </select>
          </div>
        </div>
        <div>
          <div class="prtfCommon prtfFields">PortfolioType:</div>
          <div class="prtfCommon prtfUserValues">
            <select name="portfolioType" [(ngModel)]="portfolioType">
              <option selected>Trades</option>
              <option>Simulation</option>
            </select>
          </div>
        </div>
        <div>
          <div class="prtfCommon prtfFields">SharedAccess:</div>
          <div class="prtfCommon prtfUserValues">
            <select name="userAccess" [(ngModel)]="userAccess">
              <option selected>Restricted</option>
              <option>OwnerOnly</option>
              <option>Anyone</option>
            </select>
          </div>
        </div>
        <div>
          <div class="prtfCommon prtfFields">User Note:</div>
          <div class="prtfCommon prtfUserValues">
            <input type="text" placeholder="write some notes" name="userNote" [(ngModel)]="userNote">
          </div>
        </div>
      </div>
      <span>
        <button id="createPortfolioButton" (click)="onCreatePortfolioClicked()"> Create New Portfolio</button>
        <button class="closePopup" (click)="closeCreatePortfolioPopup()" [ngStyle]="{'display': isCreatePortfolioPopupVisible ? 'block' : 'none'}">Dismiss</button>
      </span>
    </div><br>
    <div class="popup infoPopup" [ngStyle]="{'display': isUpdatePopupVisible ? 'block' : 'none'}"><br>
      <label><b>Name:</b>&nbsp;</label>
      <input type="text" placeholder="update Folder/Prtf Name" [(ngModel)]="updatePrtfName" [value]="updatePrtfName"><br><br>
      <span>
        <button (click)="onUpdatePortfolioItemClicked()"> Update Folder/Portfolio</button>
        <button class="closePopup" (click)="closeUpdatePortfolioItemPopup()" [ngStyle]="{'display': isUpdatePopupVisible ? 'block' : 'none'}">Dismiss</button>
      </span>
    </div><br>
  </div>
  <div id="resizer" (mouseover)="onMouseOverResizer('resizer')"></div>
  <div id="panelPrtfDetails">
    <div id="panelChart">Panel Chart
      Width: {{panelPrtfChrtWidth}}
      Height: {{panelPrtfChrtHeight}}
    </div>
    <div id="resizer2" (mouseover)="onMouseOverResizer('resizer2')"></div>
    <div id="panelStatsAndPerfSpec">
      <div id="panelStats">Panel Stats
        Width: {{panelStatsWidth}}
        Height: {{panelStatsHeight}}
      </div>
      <div id="panelPrtfSpec">Panel PrtfSpec
        Width: {{panelPrtfSpecWidth}}
        Height: {{panelPrtfSpecHeight}}
        <div>
          <div class="prtfSpecPreviewButtons"><button [ngStyle]="{'background-color': tabPrtfSpecVisibleIdx == 1 ? 'aqua' : ''}" (click)="onClickPrtfSpecPreview(1)">Positions</button></div>
          <div class="prtfSpecPreviewButtons"><button [ngStyle]="{'background-color': tabPrtfSpecVisibleIdx == 2 ? 'aqua' : ''}" (click)="onClickPrtfSpecPreview(2)">StrategyParameters</button></div>
        </div>
        <div [hidden]="tabPrtfSpecVisibleIdx != 1" id="positions">This is always Visible</div>
        <div [hidden]="tabPrtfSpecVisibleIdx == 1" id="StrategyParameters">Only for backtest</div>
      </div>
    </div>
  </div>
</div>
<div class="popup infoPopup" [ngStyle]="{'visibility': isDeleteConfirmPopupVisible ? 'visible' : 'hidden'}">Confirm Delete<br><br>
  <span class="popupMsg">Are you sure you want to permanently delete folder / portfolio "{{deletePrtfItemName}}"</span><br><br>
  <button type="button" (click)="onConfirmDeleteYesClicked()">Yes</button>&nbsp;
  <button type="button" (click)="onConfirmDeleteNoClicked()">No</button>
</div>
<div class="popup warnPopup" [ngStyle]="{'visibility': isErrorPopupVisible ? 'visible' : 'hidden'}">Error from the Server<br><br>
  <span class="popupMsg">{{errorMsgToUser}}</span><br><br>
  <button type="button" (click)="onErrorOkClicked()">Ok</button>
</div>