BrAcc:
<span class="selectedNavBraccCl" (click)=onSelectedNavClicked($event)>{{selectedNav}}&#x25bc;
    <span class="navSelectionPopupBraccCl" id="braccViewerNavSelectionPopupId" (click)=onNavSelectionPopupClicked($event)>
        NAVs:
        <select  id="braccViewerNavSelect" (change)="onNavSelectChange($event)">
        </select>
        </span>
</span>
<!-- <select  id="braccViewerNavSelectAngular" selected = {{navSelectionSelected}} (change)="onNavSelectChangeAngular($event)">
</select> -->
MarketBar
<span>
    <span *ngFor="let item of uiMktBar"> 
        <a href="https://uk.tradingview.com/chart/?symbol={{item.symbol}}">{{item.symbol}}</a>: 
        <span [ngClass]="{
            'mktBarPositivePerf' : item.pctChg > 0,
            'mktbarNegativePerf' : item.pctChg < 0
         }">{{item.pctChg | percent:'1.2'}},
        <!-- {{item.lastClose | percent:'1.2'}} -->
        </span>
    </span>
</span>
<hr>
<!-- (change)="onNavSelectedChangeAng($event.target.value)" -->
<select [(ngModel)] = "navSelectionSelected" (change)="onNavSelectedChangeAng($event)">
    <option *ngFor="let item of navSelectionChoices" [value]="item">{{item}}</option>
</select>
<p>{{"Selected: " + navSelectionSelected}}</p>
<div>
    <span>
    <div class="AccSumm">
        <h4>Account Summary</h4>
        <div id="plSum">P&L Today : 
            <span [ngClass]="{
                'mktBarPositivePerf' : uiSnapTab.sumPlTodVal > 0,
                'mktbarNegativePerf' : uiSnapTab.sumPlTodVal < 0
                }">{{uiSnapTab.sumPlTodVal}}
            </span>
            <span [ngClass]="{
                'mktBarPositivePerf' : uiSnapTab.sumPlTodPct > 0,
                'mktbarNegativePerf' : uiSnapTab.sumPlTodPct < 0
                }">({{uiSnapTab.sumPlTodPct | percent:'1.2'}})
            </span> 
        </div>
        <div><span id="plSum">NAV,</span> Total NetLiquidation (with cash) :<Span id="liqVal">{{uiSnapTab.netLiquidationStr | currency:'USD':'$'}}</Span> </div>
        
    </div>
    <div class="ChartSumm">
        <span class="tab">
            <span id="default" (click)="tabHeaderClicked($event,1)"> HistoricalChart </span>
            <span id="default" (click)="tabHeaderClicked($event,2)"> MoreDetails </span>
        </span>
        <div>
            <div *ngIf="tabPageVisibleIdx == 1" id="tab1">
                <h4>AccountDetails</h4>
                <select [(ngModel)] = "yrSelectionSelected">
                    <option *ngFor="let item of yrSelectionChoices" [value]="item">{{item}}</option>
                </select>
                <p>{{"Selected: " + yrSelectionSelected}}</p>
                <div *ngFor="let item of brAccHistStatVal">
                    AssetID : {{item.assetId}}, periodStartDate {{item.periodStartDate}}, 
                    periodEndDate {{item.periodEndDate}}
                </div>
            </div>
            <div *ngIf="tabPageVisibleIdx == 2" id="tab2">
                <div class="sections">
                    <div>IB Total Cash: <span id="plSum">{{uiSnapTab.totalCashValue}}</span></div>
                    <div>IB Initial MarginReq: <span id="plSum">{{uiSnapTab.initialMarginReq}}</span></div>
                    <div>IB Maintenance MarginReq: <span id="plSum">{{uiSnapTab.maintMarginReq}}</span></div>
                    <div>IB Gross Position Value: <span id="plSum">{{uiSnapTab.grossPositionValue}}</span></div>
                    <div>Number Of Positions: <span id="plSum">{{uiSnapTab.numOfPoss}}</span></div>
                </div>
                <div class="sections">
                    <div>Long Stock MktValue: <span id="plSum">{{uiSnapTab.longStcokValue}}</span><span> (!! Long VXX is here, although it is market bearish. 'Short VXX', 'short SH' are market bullish, but not here.)</span> </div>
                    <div>Short Stock MktValue: <span id="plSum">{{uiSnapTab.shortStockValue}}</span></div>
                    <div>Call Option Delta Adjusted DelivValue: <span id="plSum"></span></div>
                    <div>Put Option Delta Adjusted DelivValue: <span id="plSum"></span></div>
                </div>
                <div class="sections">
                    <div>Max Risked estimate:(LongStk + ShortStk (incorrect! Infinite) + LongOptMktValue + ShortOptMktValue(incorrect! Infinite)): <span id="plSum"></span>
                    <span id="plSum" class="tooltipCell"
                        [ngClass]="{'green' : uiSnapTab.totalMaxRiskedLeverage < 1.3,
                                    'orange': uiSnapTab.totalMaxRiskedLeverage >= 1.3 || uiSnapTab.totalMaxRiskedLeverage <=1.5,
                                    'red' : uiSnapTab.totalMaxRiskedLeverage > 1.5}"> (Leverage <b>{{uiSnapTab.totalMaxRiskedLeverage  | percent:'1.2'}}</b>)*
                            <div class="tooltipSnap">
                                <div class="snapshot">
                                    Leverage greater than 1.5 -> red <br>
                                    Leverage between 1.3 - 1.5 -> orange <br>
                                    Leverage less than 1.3 -> green
                                </div>
                            </div>
                    </span>
                    </div>
                    <div>Delta Adjusted Bullish/Bearish Market Orientation:(LongStock - ShortStock + dAdj.CallOption - dAdj.PutOption) <span id="plSum"></span></div>
                    <div>Beta Delta Adjusted Bullish/Bearish Market Orientation (approx. mkt exposure sum)<span id="plSum"></span></div>
                </div>
            </div>
        </div>
    </div>
</span>
</div>
<br>

<hr>
<table class = "selectedBrcAccSnapShotTbl">
    <thead class = "selectedBrcAccSnapShotTbl">
        <th (click)="onSortingClicked($event, 'Symbol')">Symbol</th>
        <th>LocalSymbol</th>
        <th (click)="onSortingClicked($event, 'Pos')">Pos</th>
        <th (click)="onSortingClicked($event, 'Cost')">Cost</th>
        <th (click)="onSortingClicked($event, 'PriorClose')">Prior<br>Close</th>
        <th (click)="onSortingClicked($event, 'estPrice')">Est<br>Price</th>
        <th (click)="onSortingClicked($event, 'DailyPctChg')">Chg%<br>Today</th>
        <th [ngStyle]="{'background-color': 'blue'}" (click)="onSortingClicked($event, 'DailyPL')">P&L<br>Today</th>
        <th (click)="onSortingClicked($event, 'ProfLos')">P&L</th>
        <th (click)="onSortingClicked($event, 'MktVal')">MktVal</th>
        <th (click)="onSortingClicked($event, 'EstUndPrice')">Est<br>UndPr</th>
        <th (click)="onSortingClicked($event, 'IbCompUndPr')">IbComp<br>UndPr</th>
        <th (click)="onSortingClicked($event, 'IbCompDeltar')">IbComp<br>Delta</th>
        <th (click)="onSortingClicked($event, 'DelivVal')">Deliv<br>Value</th>
        <th (click)="onSortingClicked($event, 'DltAdjDelivVal')">DltAdj<br>DelivVal</th>
        <th (click)="onSortingClicked($event, 'gBeta')">gBeta</th>
        <th (click)="onSortingClicked($event, 'gBetaDltAdj')">BetaDltAdj<br>MktOriVal</th>
        <th (click)="onSortingClicked($event, 'Acc')">Acc</th>
    </thead>
    <tbody class = "selectedBrcAccSnapShotTbl">
    <tr *ngFor="let item of uiSnapPosItem">
        <td [ngStyle]="{'font-weight': 'bold'}"><a href="https://uk.tradingview.com/chart/?symbol={{item.symbol}}" target="_blank">{{item.symbol}}</a></td>
        <td></td>
        <td>{{item.pos}}</td>
        <td>{{item.avgCost | number:'1.1-2'}}</td>
        <td>{{item.priorCloseStr}}</td>
        <!-- <td>{{item.lastCloseStr}}</td> -->
        <td>{{item.estPrice | number:'1.1-2'}}</td>
        <td [ngClass]="{
            'mktBarPositivePerf' : item.pctChgTod > 0,
            'mktbarNegativePerf' : item.pctChgTod < 0
         }">{{item.pctChgTod | percent:'1.2'}}</td>
        <td >{{item.plTod}}</td>
        <td>{{item.pl}}</td>
        <td>{{item.mktVal}}</td>
        <td>{{item.estUndPrice}}</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>{{item.gBeta | number:'1.1-2'}}</td>
        <td>{{item.betaDltAdj}}</td>
        <td>{{item.accId}}</td>
    </tr>
    </tbody>
</table>
<!-- <button (click)="onSortClicked($event)">Sort</button>fv -->
<hr>
<!-- Addded class "selectedTempDebug" to limit the text output in the UI-->
<div class="selectedTempDebug">
<br><br>Temporary Debug Info: <br>
HandshakeMsgStr: <br> <span>{{ handshakeStr }}</span><br><br>
MarketBarLastClosesStr: <br> <span>{{ mktBrLstClsStr }}</span><br><br>
HistStr: <br> <span>{{ histStr }}</span><br><br>
BrAccountSnapshot: <br> <span>{{ brAccountSnapshotStr }}</span>
</div>

<hr>
[1. MarketBar on top, QQQ, SPY, TLT, VXX, UNG, USO]<br>
[2. [AccountData under it]<br>
    2.1 [AccountSummary, 1/3rd on the left box] NAV selection combo-box, P&L Today (both from Positions and yesterdayNav), NAV (only)<br>
    2.2 [AccountDetails, 2/3rd on the right box] Tabpage with 2 tabs<br>
        2.2.1 [HistoricalChart] default: visible, PeridSelectionComboBox (YTD) at bottom<br>
        2.2.2 [MoreDetails: Cash, MarginReq], default: hidden<br>
[3. AccountPositions under it, the data table]<br>
