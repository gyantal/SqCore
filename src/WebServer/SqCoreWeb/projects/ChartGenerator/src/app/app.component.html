<div class="mainDiv1">
  <h4>Chart Generator</h4>
  <div class="chrtGenDiagnosticsMsg" (mouseenter)="mouseEnter('chrtGenDiagnosticsMsg')" title="{{chrtGenDiagnosticsMsg}}">
      <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="4rem" height="1.5rem" viewBox="0 0 159 153" preserveAspectRatio="xMidYMid meet">
          <g [ngStyle]="{'fill': isSrvConnectionAlive ? 'green' : 'red'}" transform="translate(0.0,153.0) scale(0.10,-0.10)">
            <path d="M491 1484 c-84 -23 -150 -63 -227 -139 -111 -111 -161 -239 -151
                  -390 25 -366 391 -587 730 -442 l49 20 221 -220 c122 -121 230 -223 239 -226
                  24 -8 76 11 88 33 6 10 10 34 10 52 0 30 -22 55 -216 249 l-217 217 26 34 c80
                  104 120 266 98 395 -35 202 -198 378 -391 422 -64 15 -195 12 -259 -5z m308
                  -124 c86 -40 170 -123 208 -207 35 -75 43 -203 19 -285 -63 -217 -300 -346
                  -515 -279 -198 62 -323 257 -291 455 45 276 330 431 579 316z"/>
            <path d="M626 1075 c-44 -102 -82 -185 -87 -185 -4 0 -18 17 -30 38 -12 20
                  -23 38 -24 39 -2 3 -169 -16 -202 -23 -13 -2 -23 -11 -23 -18 0 -10 22 -16 78
                  -21 42 -4 84 -11 93 -16 9 -4 38 -42 63 -84 26 -41 51 -75 55 -75 5 0 39 72
                  77 160 38 88 72 160 75 160 4 0 17 -28 29 -62 13 -35 26 -66 29 -69 3 -4 53
                  -1 111 7 58 7 111 13 118 14 6 0 12 6 12 14 0 11 -20 16 -77 21 -43 3 -85 10
                  -93 14 -8 4 -37 64 -63 132 -27 68 -52 127 -56 131 -4 4 -42 -75 -85 -177z"/>
          </g>
      </svg>
  </div>
  <!-- Class=commonColStyle name will be changed in future - Daya(28-04-2023) -->
  <span class="commonColStyle" id="portfolios">
    <span>PortfolioIds: <input class="prtfAndBmrkInputs" id="pfIds" type="text" [(ngModel)]="prtfIds"></span><br>
    <span>Benchmarks: <input class="prtfAndBmrkInputs" id="bmrks" type="text" [(ngModel)]="bmrks"></span><br>
    <span class="range">Range:
      <div class="selectionDropDown">
        <input class="highlightInputDropDown" type="text" oninput="this.value = this.value.toUpperCase()" [(ngModel)]="histRangeSelected" (change)="onUserChangedHistDateRange(histRangeSelected)">
        <div class="listDropDown">
          <option class="optionDropDown" *ngFor="let item of rangeSelection" [value]="item" (click)="onUserChangedHistDateRange(item)">{{item}}</option>
        </div>
      </div>
    </span>&nbsp;<br>
    <span>Start: <input type="date" id="StartDate" name="startDate" min="1975-01-01" [(ngModel)]="startDateStr" (change)="onUserChangedStartOrEndDateWidgets()"></span>&nbsp;
    <span>End: <input type="date" id="EndDate" name="EndDate" min="1975-01-01" max="2040-01-01" [(ngModel)]="endDateStr" (change)="onUserChangedStartOrEndDateWidgets()"></span>&nbsp;&nbsp;<br>
    <button class="backtestBtn" (click)="onStartBacktestsClicked()">Start Server Backtest</button>
  </span>
  <span class="commonColStyle" id="stockAndIndexes">
    StockAndIndexes
  </span>
  <span class="commonColStyle" id="techIndicators">
    Tech TechIndicators
  </span>
  <span class="commonColStyle" id="others">
    Others
  </span><br><br>
  <span>Portfolio Value Chart</span>
  <div id="backtestPvChrt">
    <div id="pfRunResultChrt"></div>
    <div id='tooltipChart'></div>
  </div>
  <div *ngFor="let item of uiChrtGenPrtfRunResults">
    <div *ngFor="let lg of item.sqLogs">
      <div [ngClass]="lg.sqLogLevel == ('Error' || 'Warn') ? 'errWarnLog' : 'infoLog'" *ngIf="lg.message != null">{{lg.message}}</div>
    </div>
  </div><br>
  <div class="statsTbl">
    <table>
      <thead>
        <tr>
          <th>Statistics</th>
          <th *ngFor="let item of backtestStatsResults">{{item.name}}</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let stat of backtestStatsResults[0]?.stats | keyvalue"> <!-- we only use backtestStatsResults[0]?.stats to get the statistics keys (since all items in the array should have the same statistics keys). -->
        <tr>
          <td>{{stat.key}}</td>
          <td *ngFor="let item of backtestStatsResults">{{item.stats[stat.key] | number:'0.2'}}</td>
        </tr>
      </ng-container>
      </tbody>
  </table>
  </div>
</div>
<!-- Progress bar -->
<div class="progressBarContainer" [ngStyle]="{'display': isProgressBarVisble ? 'block' : 'none'}">
  <div class="progressBar"></div>
</div>